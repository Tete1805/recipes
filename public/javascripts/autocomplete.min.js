!function(){"use strict";function e(e){return e.currentTarget.nextElementSibling}function t(t){var n=e(this);n&&(n.style.display=t)}function n(e){t.call(e,"inline-block")}function r(n){e(n)&&t.call(n,"none")}function a(){var e=this;return Object.keys(this).map(function(t){return e[t]})}function i(e,t){if(e.children.length>0){var n=e.querySelector(".active");n&&(n.className=""),e.children[t].className="active"}}function c(e){var t=e.querySelector(".active");return t?t.innerText:""}function l(e){if("Tab"===e.key||"Enter"===e.key){var t=e.currentTarget;t.value.length>0&&(t.value=c(t.nextElementSibling))}}function o(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){var t=e.currentTarget,n=t.nextElementSibling,r=a.apply(n.children),i=n.querySelector(".active"),c=r.indexOf(i);"ArrowDown"===e.key&&(c=c===r.length-1?0:c+1),"ArrowUp"===e.key&&(c=-1===c||0===c?r.length-1:c-1),i&&(i.className=""),r[c].className="active",t.value=r[c].innerText}}function s(e){var t=e.currentTarget,n=t.value.toLowerCase(),r=t.getAttribute("my-autocomplete"),a=r?JSON.parse(r):{},c=t.parentElement;if(a.maxItems=a.maxItems||20,a.list=a.list||[],a.markItems=a.markItems||!1,!t.nextElementSibling){var l=document.createElement("UL");c.insertBefore(l,t.nextElementSibling)}var o=t.nextElementSibling;if(!(e.key&&e.key.length>1&&"Backspace"!==e.key)){o.innerText="";var s=[];a.list.forEach(function(e){if(a.markItems){var t=n.split(""),r=e.split("");t.forEach(function(e){r=r.map(function(t){return t.toLowerCase()===e?"<span class='ac-found'>"+t+"</span>":t})}),e=r.join("")}var i=e.toLowerCase().replace(/(<[^>]*>)/g,""),c=new RegExp("[^"+i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"]","i");n.length&&i.indexOf(n)>-1?s.splice(0,0,e):c.test(n)||s.push(e)}),s.splice(0,a.maxItems).forEach(function(e){var t=document.createElement("LI");t.innerHTML=e,t.addEventListener("mouseenter",function(e){e.currentTarget.classList.add("active")}),t.addEventListener("mouseleave",function(e){var t=e.currentTarget;t.classList.remove("active"),i(t.parentElement,0)}),t.addEventListener("mousedown",function(e){var t=e.currentTarget;t.parentElement.previousElementSibling.value=t.innerText}),o.appendChild(t)}),c.insertBefore(o,t.nextElementSibling),i(o,0)}}function u(e){e.addEventListener("focus",n),e.addEventListener("focus",s),e.addEventListener("blur",r),e.addEventListener("keyup",s),e.addEventListener("keydown",l),e.addEventListener("keydown",o)}!function(){var e=document.querySelectorAll("input[my-autocomplete]");Array.prototype.map.call(e,u),Array.prototype.map.call(e,function(e){var t=document.createElement("DIV");t.classList.add("my-autocomplete"),e.parentElement.insertBefore(t,e),t.appendChild(e)})}()}();