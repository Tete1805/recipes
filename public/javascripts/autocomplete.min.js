!function(){"use strict";function e(){var e=this;return Object.keys(this).map(function(t){return e[t]})}function t(e,t){if(e.children.length>0){var n=e.querySelector(".active");n&&(n.className=""),e.children[t].className="active"}}function n(e){var t=e.querySelector(".active");return t?t.innerText:""}function r(e){if("Enter"===e.key){var t=e.currentTarget;t.value.length>0&&(t.value=n(t.nextElementSibling))}}function a(t){if("ArrowDown"===t.key||"ArrowUp"===t.key){var n=t.currentTarget,r=n.nextElementSibling,a=e.apply(r.children),i=r.querySelector(".active"),c=a.indexOf(i);"ArrowDown"===t.key&&(c=c===a.length-1?0:c+1),"ArrowUp"===t.key&&(c=-1===c||0===c?a.length-1:c-1),i&&(i.className=""),a[c].className="active",n.value=a[c].innerText}}function i(e){var n=e.currentTarget,r=n.value.toLowerCase(),a=n.getAttribute("my-autocomplete"),i=a?JSON.parse(a):{},c=n.parentElement;if(i.maxItems=i.maxItems||20,i.list=i.list||[],i.markItems=i.markItems||!1,!n.nextElementSibling){var l=document.createElement("UL");c.insertBefore(l,n.nextElementSibling)}var o=n.nextElementSibling;if(!(e.key&&e.key.length>1&&"Backspace"!==e.key)){o.innerText="";var s=[];i.list.forEach(function(e){if(i.markItems){var t=r.split(""),n=e.split("");t.forEach(function(e){n=n.map(function(t){return t.toLowerCase()===e?"<span class='ac-found'>"+t+"</span>":t})}),e=n.join("")}var a=e.toLowerCase().replace(/(<[^>]*>)/g,""),c=new RegExp("[^"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"]","i");r.length&&a.indexOf(r)>-1?s.splice(0,0,e):c.test(r)||s.push(e)}),s.splice(0,i.maxItems).forEach(function(e){var n=document.createElement("LI");n.innerHTML=e,n.addEventListener("mouseenter",function(e){e.currentTarget.classList.add("active")}),n.addEventListener("mouseleave",function(e){var n=e.currentTarget;n.classList.remove("active"),t(n.parentElement,0)}),n.addEventListener("mousedown",function(e){var t=e.currentTarget;t.parentElement.previousElementSibling.value=t.innerText}),o.appendChild(n)}),c.insertBefore(o,n.nextElementSibling),t(o,0)}}function c(e){e.addEventListener("focus",i),e.addEventListener("keyup",i),e.addEventListener("keydown",r),e.addEventListener("keydown",a)}function l(){var e=document.querySelectorAll("input[my-autocomplete]");Array.prototype.map.call(e,c),Array.prototype.map.call(e,function(e){var t=document.createElement("DIV");t.classList.add("my-autocomplete"),e.parentElement.insertBefore(t,e),t.appendChild(e)})}window.addEventListener("load",l,!1)}();